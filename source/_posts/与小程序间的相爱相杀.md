---
title: 与小程序的相爱相杀
tags:
    - 小程序
categories:
    - 前端
---

#### 问题1：自定义组件时，canvas组件无法注册

```js
ready(){
    const ctx = wx.createCanvasContext('back-canvas')
    ctx.setFillStyle('red')
    ctx.fillRect(10, 10, 150, 75)
    ctx.draw();
  }
```
```html
<canvas class='canvas' canvas-id="back-canvas" style="width:200px;height:200px;"></canvas>
```

解决办法：createCanvasContext方法是有两个参数的，在page页面默认传了一个this,组件里面 需要手动传this
```js
const ctx = wx.createCanvasContext('myCanvas',this);
```
     
#### 问题2：使用image标签的binderror方法，避免图片URL无效
#### 问题3：生命周期onLoad只加载一次只是对页面不属于栈顶有效，如果页面属于栈顶，则页面onLoad会随页面加载多次
#### 问题4：选择拍照功能和相册选择图片，原有的页面会onHide
#### 问题5：margin-bottom在iOS环境下无效，建议改成padding-bottom
#### 问题6：wx.createInnerAudioContext()播放语音先try销毁再新建
#### 问题7：小程序console过多报错: [转](https://blog.csdn.net/rolan1993/article/details/80431569)
```
 Uncaught TypeError: Converting circular structure to JSON
 
 解决办法： 注释掉console.log
```
#### 问题8：setNavigationBarTitle动态异步设置title存在bug，目前官方正在解决中...
#### 问题9：wxs文件解决wxml中不能写计算逻辑问题
#### 问题10：setData修改数组某一项值时可以不用全局赋值

```
var price = 'goods['+index+'].price'
this.setData({
    [price]:'changed data'
})
```
#### 问题11：阿拉伯数字 会增大一行的font-size
